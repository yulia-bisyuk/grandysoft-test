{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const canvas = document.getElementById('canvas');\nconst button = document.getElementById('collapse');\nconst ctx = canvas.getContext('2d');\n\nlet coord = { x: 0, y: 0 };\nlet coordPath = [];\nlet allLines = [];\nlet intersection;\n\ndocument.addEventListener('click', start);\n\nfunction setPosition(event) {\n  coord.x = event.clientX - canvas.offsetLeft;\n  coord.y = event.clientY - canvas.offsetTop;\n  coordPath.push({\n    x: event.clientX - canvas.offsetLeft,\n    y: event.clientY - canvas.offsetTop,\n  });\n}\n\nfunction start(event) {\n  console.log('start');\n  if (event.target.id !== 'canvas') return;\n  setPosition(event);\n  document.addEventListener('mousemove', draw);\n}\n\nfunction getLine(start, end) {\n  let line = [start, end];\n  return line;\n}\n\nfunction setAllLines(line) {\n  allLines.push(line);\n}\n\nfunction draw(event) {\n  console.log('draw');\n  document.removeEventListener('click', start);\n  ctx.beginPath();\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = '#000';\n  ctx.moveTo(coord.x, coord.y);\n  setPosition(event);\n  ctx.lineTo(coord.x, coord.y);\n  ctx.stroke();\n  document.addEventListener('click', stop);\n}\n\nfunction stop(event) {\n  console.log('stop');\n  document.removeEventListener('mousemove', draw);\n\n  setPosition(event);\n\n  let line = getLine(coordPath[0], coordPath[coordPath.length - 1]);\n  setAllLines(line);\n  console.log('allLines', allLines);\n  let line1;\n  let line2;\n  if (allLines.length >= 2)\n    for (let i = 0; i <= allLines.length; i++) {\n      line1 = allLines[i];\n      line2 = allLines[i + 1];\n      console.log('line1', line1);\n      console.log('line2', line2);\n      if (line1 && line2)\n        intersection = calculateIntersection(\n          line1[0],\n          line1[1],\n          line2[0],\n          line2[1]\n        );\n      console.log('intersection', intersection);\n    }\n\n  if (intersection)\n    drawPoint(Math.ceil(intersection.x), Math.ceil(intersection.y));\n  coordPath = [];\n  document.removeEventListener('click', stop);\n  document.addEventListener('click', start);\n}\n\nfunction calculateIntersection(p1, p2, p3, p4) {\n  let c2x = p3.x - p4.x;\n  let c3x = p1.x - p2.x;\n  let c2y = p3.y - p4.y;\n  let c3y = p1.y - p2.y;\n\n  let d = c3x * c2y - c3y * c2x;\n\n  if (d == 0) {\n    console.log('Number of intersection points is zero or infinity.');\n  }\n\n  let u1 = p1.x * p2.y - p1.y * p2.x;\n  let u4 = p3.x * p4.y - p3.y * p4.x;\n\n  let px = (u1 * c2x - c3x * u4) / d;\n  let py = (u1 * c2y - c3y * u4) / d;\n\n  let p = { x: px, y: py };\n\n  return p;\n}\n\nfunction drawPoint(x, y) {\n  ctx.fillStyle = 'red';\n  ctx.beginPath();\n\n  ctx.arc(x, y, 5, 0, 2 * Math.PI, true);\n  ctx.fill();\n}\n\nbutton.addEventListener('click', clearDrawings);\n\nconst canvasSpinning = [\n  { transform: 'rotate(0) scale(1)' },\n  { transform: 'rotate(360deg) scale(0)' },\n];\n\nconst canvasTiming = {\n  duration: 500,\n  iterations: 1,\n};\n\nfunction clearDrawings() {\n  if (!coord.x && !coord.y) return;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  canvas.animate(canvasSpinning, canvasTiming);\n  intersection = null;\n}\n"],"names":["$1f0dc3b9307be026$var$canvas","document","getElementById","$1f0dc3b9307be026$var$button","$1f0dc3b9307be026$var$ctx","getContext","$1f0dc3b9307be026$var$intersection","$1f0dc3b9307be026$var$coord","x","y","$1f0dc3b9307be026$var$coordPath","$1f0dc3b9307be026$var$allLines","$1f0dc3b9307be026$var$setPosition","event","clientX","offsetLeft","clientY","offsetTop","push","$1f0dc3b9307be026$var$start","console","log","target","id","addEventListener","$1f0dc3b9307be026$var$draw","removeEventListener","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","$1f0dc3b9307be026$var$stop","start1","end","line1","line2","line","$1f0dc3b9307be026$var$setAllLines","length","i","$1f0dc3b9307be026$var$calculateIntersection","Math","ceil","fillStyle","arc","PI","fill","p1","p2","p3","p4","c2x","c3x","c2y","c3y","d","u1","u4","clearRect","width","height","animate","$1f0dc3b9307be026$var$canvasSpinning","$1f0dc3b9307be026$var$canvasTiming","transform","duration","iterations"],"version":3,"file":"index.644b25ce.js.map"}