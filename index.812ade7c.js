const e=document.getElementById("canvas"),t=document.getElementById("collapse"),n=e.getContext("2d");let o,i={x:0,y:0},l=[],c=[];function r(t){i.x=t.clientX-e.offsetLeft,i.y=t.clientY-e.offsetTop,l.push({x:t.clientX-e.offsetLeft,y:t.clientY-e.offsetTop})}function s(e){console.log("start"),"canvas"===e.target.id&&(r(e),document.addEventListener("mousemove",a))}function a(e){console.log("draw"),document.removeEventListener("click",s),n.beginPath(),n.lineWidth=1,n.strokeStyle="#000",n.moveTo(i.x,i.y),r(e),n.lineTo(i.x,i.y),n.stroke(),document.addEventListener("click",d)}function d(e){var t,i;let u,m;if(console.log("stop"),document.removeEventListener("mousemove",a),r(e),function(e){c.push(e)}((t=l[0],i=l[l.length-1],[t,i])),console.log("allLines",c),c.length>=2)for(let e=0;e<=c.length;e++)u=c[e],m=c[e+1],console.log("line1",u),console.log("line2",m),u&&m&&(o=f(u[0],u[1],m[0],m[1])),console.log("intersection",o);var y,g;o&&(y=Math.ceil(o.x),g=Math.ceil(o.y),n.fillStyle="red",n.beginPath(),n.arc(y,g,5,0,2*Math.PI,!0),n.fill()),l=[],document.removeEventListener("click",d),document.addEventListener("click",s)}function f(e,t,n,o){let i=n.x-o.x,l=e.x-t.x,c=n.y-o.y,r=e.y-t.y,s=l*c-r*i;if(0==s)throw new Error("Number of intersection points is zero or infinity.");let a=e.x*t.y-e.y*t.x,d=n.x*o.y-n.y*o.x;return{x:(a*i-l*d)/s,y:(a*c-r*d)/s}}document.addEventListener("click",s),t.addEventListener("click",(function(){if(!i.x&&!i.y)return;n.clearRect(0,0,e.width,e.height),e.animate(u,m),o=null}));const u=[{transform:"rotate(0) scale(1)"},{transform:"rotate(360deg) scale(0)"}],m={duration:500,iterations:1};
//# sourceMappingURL=index.812ade7c.js.map
