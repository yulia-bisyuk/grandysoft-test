{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const canvas = document.getElementById('canvas');\nconst button = document.getElementById('collapse');\nconst ctx = canvas.getContext('2d');\n\nlet coord = { x: 0, y: 0 };\nlet coordPath = [];\nlet allLines = [];\nlet intersection;\n\ndocument.addEventListener('click', start);\n\nfunction setPosition(event) {\n  coord.x = event.clientX - canvas.offsetLeft;\n  coord.y = event.clientY - canvas.offsetTop;\n  coordPath.push({\n    x: event.clientX - canvas.offsetLeft,\n    y: event.clientY - canvas.offsetTop,\n  });\n}\n\nfunction start(event) {\n  console.log('start');\n  if (event.target.id !== 'canvas') return;\n  setPosition(event);\n  document.addEventListener('mousemove', draw);\n}\n\nfunction getLine(start, end) {\n  let line = [start, end];\n  return line;\n}\n\nfunction setAllLines(line) {\n  allLines.push(line);\n}\n\nfunction draw(event) {\n  console.log('draw');\n  document.removeEventListener('click', start);\n  ctx.beginPath();\n  ctx.lineWidth = 1;\n  ctx.strokeStyle = '#000';\n  ctx.moveTo(coord.x, coord.y);\n  setPosition(event);\n  ctx.lineTo(coord.x, coord.y);\n  ctx.stroke();\n  document.addEventListener('click', stop);\n}\n\nfunction stop(event) {\n  console.log('stop');\n  document.removeEventListener('mousemove', draw);\n\n  setPosition(event);\n\n  let line = getLine(coordPath[0], coordPath[coordPath.length - 1]);\n  setAllLines(line);\n  console.log('allLines', allLines);\n  let line1;\n  let line2;\n  if (allLines.length >= 2)\n    for (let i = 0; i <= allLines.length; i++) {\n      line1 = allLines[i];\n      line2 = allLines[i + 1];\n      console.log('line1', line1);\n      console.log('line2', line2);\n      if (line1 && line2)\n        intersection = calculateIntersection(\n          line1[0],\n          line1[1],\n          line2[0],\n          line2[1]\n        );\n      console.log('intersection', intersection);\n    }\n\n  if (intersection)\n    drawPoint(Math.ceil(intersection.x), Math.ceil(intersection.y));\n  coordPath = [];\n  document.removeEventListener('click', stop);\n  document.addEventListener('click', start);\n}\n\nfunction calculateIntersection(p1, p2, p3, p4) {\n  let c2x = p3.x - p4.x;\n  let c3x = p1.x - p2.x;\n  let c2y = p3.y - p4.y;\n  let c3y = p1.y - p2.y;\n\n  let d = c3x * c2y - c3y * c2x;\n\n  if (d == 0) {\n    throw new Error('Number of intersection points is zero or infinity.');\n  }\n\n  let u1 = p1.x * p2.y - p1.y * p2.x;\n  let u4 = p3.x * p4.y - p3.y * p4.x;\n\n  let px = (u1 * c2x - c3x * u4) / d;\n  let py = (u1 * c2y - c3y * u4) / d;\n\n  let p = { x: px, y: py };\n\n  return p;\n}\n\nfunction drawPoint(x, y) {\n  ctx.fillStyle = 'red';\n  ctx.beginPath();\n\n  ctx.arc(x, y, 5, 0, 2 * Math.PI, true);\n  ctx.fill();\n}\n\nbutton.addEventListener('click', clearDrawings);\n\nconst canvasSpinning = [\n  { transform: 'rotate(0) scale(1)' },\n  { transform: 'rotate(360deg) scale(0)' },\n];\n\nconst canvasTiming = {\n  duration: 500,\n  iterations: 1,\n};\n\nfunction clearDrawings() {\n  if (!coord.x && !coord.y) return;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  canvas.animate(canvasSpinning, canvasTiming);\n  intersection = null;\n}\n"],"names":["$b8f9b7833fa37166$var$intersection","$b8f9b7833fa37166$var$canvas","document","getElementById","$b8f9b7833fa37166$var$button","$b8f9b7833fa37166$var$ctx","getContext","$b8f9b7833fa37166$var$coord","x","y","$b8f9b7833fa37166$var$coordPath","$b8f9b7833fa37166$var$allLines","$b8f9b7833fa37166$var$setPosition","event","clientX","offsetLeft","clientY","offsetTop","push","$b8f9b7833fa37166$var$start","console","log","target","id","addEventListener","$b8f9b7833fa37166$var$draw","removeEventListener","beginPath","lineWidth","strokeStyle","moveTo","lineTo","stroke","$b8f9b7833fa37166$var$stop","start1","end","line1","line2","line","$b8f9b7833fa37166$var$setAllLines","length","i","$b8f9b7833fa37166$var$calculateIntersection","Math","ceil","fillStyle","arc","PI","fill","p1","p2","p3","p4","c2x","c3x","c2y","c3y","d","Error","u1","u4","clearRect","width","height","animate","$b8f9b7833fa37166$var$canvasSpinning","$b8f9b7833fa37166$var$canvasTiming","transform","duration","iterations"],"version":3,"file":"index.e61232b4.js.map"}